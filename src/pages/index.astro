---
// Redirect to login - index page is unnecessary
---

<script>
	// Check if user has a role, redirect accordingly
	const userRole = localStorage.getItem('userRole');
	const userRoleTimestamp = localStorage.getItem('userRoleTimestamp');

	// Check if role has expired (8 hours)
	if (userRole && userRoleTimestamp) {
		const eightHours = 8 * 60 * 60 * 1000;
		if (Date.now() - parseInt(userRoleTimestamp) > eightHours) {
			localStorage.removeItem('userRole');
			localStorage.removeItem('userRoleTimestamp');
			window.location.href = '/login';
		} else {
			// Role is valid, redirect to appropriate page
			if (userRole === 'manager') {
				window.location.href = '/manager';
			} else if (userRole === 'chef') {
				window.location.href = '/kitchen';
			} else if (userRole === 'barman') {
				window.location.href = '/bar';
			} else {
				window.location.href = '/login';
			}
		}
	} else {
		// No role, redirect to login
		window.location.href = '/login';
	}
</script>
