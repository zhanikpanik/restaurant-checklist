---
import Layout from '../layouts/Layout.astro';
---

<Layout title="–°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞">
	<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
		<!-- Header -->
		<header class="bg-white shadow-sm border-b border-gray-200 px-4 py-6">
			<div class="max-w-md mx-auto text-center">
				<h1 class="text-3xl font-bold text-gray-900">üè™ –†–µ—Å—Ç–æ—Ä–∞–Ω</h1>
				<p class="text-gray-600 mt-2">–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏</p>
			</div>
		</header>

		<!-- Main Content -->
		<main class="max-w-md mx-auto px-4 py-8">
			<div class="space-y-6">
				<!-- Title -->
				<div class="text-center mb-8">
					<h2 class="text-2xl font-bold text-gray-900 mb-2">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –æ—Ç–¥–µ–ª</h2>
					<p class="text-gray-600">–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—é –∏ –∑–∞–∫–∞–∑–∞–º</p>
				</div>

				<!-- Role Selection Cards -->
				<div class="space-y-4">
					<!-- Bar Staff -->
					<a href="/bar" class="block">
						<div class="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 p-6 border border-gray-200 hover:border-blue-300">
							<div class="flex items-center space-x-4">
								<div class="text-4xl">üç∑</div>
								<div class="flex-1">
									<h3 class="text-xl font-bold text-gray-900">–ë–∞—Ä</h3>
									<p class="text-gray-600">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø–∏—Ç–∫–∞–º–∏ –∏ –±–∞—Ä–Ω—ã–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º</p>
									<div class="mt-2 text-sm text-blue-600 font-medium">
										–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—Ö–æ–¥–∞ ‚Üí
									</div>
								</div>
							</div>
						</div>
					</a>

					<!-- Kitchen Staff -->
					<a href="/kitchen" class="block">
						<div class="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 p-6 border border-gray-200 hover:border-orange-300">
							<div class="flex items-center space-x-4">
								<div class="text-4xl">üç≥</div>
								<div class="flex-1">
									<h3 class="text-xl font-bold text-gray-900">–ö—É—Ö–Ω—è</h3>
									<p class="text-gray-600">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ –∏ –∫—É—Ö–æ–Ω–Ω—ã–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º</p>
									<div class="mt-2 text-sm text-orange-600 font-medium">
										–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—Ö–æ–¥–∞ ‚Üí
									</div>
								</div>
							</div>
						</div>
					</a>

					<!-- Delivery -->
					<a href="/delivery" class="block">
						<div class="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 p-6 border border-gray-200 hover:border-green-300">
							<div class="flex items-center space-x-4">
								<div class="text-4xl">üöö</div>
								<div class="flex-1">
									<h3 class="text-xl font-bold text-gray-900">–î–æ—Å—Ç–∞–≤–∫–∞</h3>
									<p class="text-gray-600">–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏</p>
									<div class="mt-2 text-sm text-green-600 font-medium">
										–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—Ö–æ–¥–∞ ‚Üí
									</div>
								</div>
							</div>
						</div>
					</a>
				</div>

				<!-- Procurement section removed -->

				<!-- Instructions -->
				<div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
					<h4 class="font-medium text-blue-900 mb-2">üí° –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:</h4>
					<ul class="text-sm text-blue-800 space-y-1">
						<li>‚Ä¢ <strong>–ë–∞—Ä/–ö—É—Ö–Ω—è:</strong> –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∑–∞–∫–∞–∑—ã –¥–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤</li>
						<li>‚Ä¢ <strong>–î–æ—Å—Ç–∞–≤–∫–∞:</strong> –û—Ç–º–µ—á–∞–π—Ç–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã –∏ —Å–∫–∞—á–∏–≤–∞–π—Ç–µ Excel</li>
					</ul>
				</div>

				<!-- Quick Stats -->
				<div class="bg-white rounded-lg shadow-sm p-4 border border-gray-200">
					<h4 class="font-medium text-gray-900 mb-3 text-center">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ–≥–æ–¥–Ω—è</h4>
					<div class="grid grid-cols-3 gap-4 text-center">
						<div>
							<div class="text-lg font-bold text-blue-600" id="barOrdersCount">-</div>
							<div class="text-xs text-gray-600">–ë–∞—Ä</div>
						</div>
						<div>
							<div class="text-lg font-bold text-orange-600" id="kitchenOrdersCount">-</div>
							<div class="text-xs text-gray-600">–ö—É—Ö–Ω—è</div>
						</div>
						<div>
							<div class="text-lg font-bold text-green-600" id="deliveredCount">-</div>
							<div class="text-xs text-gray-600">–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</div>
						</div>
					</div>
				</div>
			</div>
		</main>
	</div>

	<script is:inline>
		// Load today's statistics
		function loadTodayStats() {
			try {
				const today = new Date().toDateString();
				
				// Get orders from localStorage
				const barOrders = JSON.parse(localStorage.getItem('barOrderHistory') || '[]');
				const kitchenOrders = JSON.parse(localStorage.getItem('kitchenOrderHistory') || '[]');
				
				// Count today's orders
				const barTodayCount = barOrders.filter(order => 
					new Date(order.timestamp).toDateString() === today
				).length;
				
				const kitchenTodayCount = kitchenOrders.filter(order => 
					new Date(order.timestamp).toDateString() === today
				).length;
				
				// Count delivered orders today
				const deliveredCount = [...barOrders, ...kitchenOrders].filter(order => 
					order.status === 'delivered' && 
					order.deliveredAt && 
					new Date(order.deliveredAt).toDateString() === today
				).length;
				
				// Update display
				document.getElementById('barOrdersCount').textContent = barTodayCount;
				document.getElementById('kitchenOrdersCount').textContent = kitchenTodayCount;
				document.getElementById('deliveredCount').textContent = deliveredCount;
				
			} catch (error) {
				console.error('Failed to load stats:', error);
				// Show dashes on error
				document.getElementById('barOrdersCount').textContent = '-';
				document.getElementById('kitchenOrdersCount').textContent = '-';
				document.getElementById('deliveredCount').textContent = '-';
			}
		}
		
		// Load stats when page loads
		document.addEventListener('DOMContentLoaded', loadTodayStats);
	</script>
</Layout>
